<!DOCTYPE html>
<html>
<head>
    <title>Code Visualizer</title>
    <script src="https://unpkg.com/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.12/themes/default/style.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jstree/3.3.12/jstree.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
        }
        .header p {
            margin: 5px 0 0 0;
            opacity: 0.9;
        }
        .diagram-container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            min-height: 400px;
        }
        .mermaid {
            text-align: center;
        }
        .legend {
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }
        .legend h3 {
            margin-top: 0;
            color: #333;
        }
        .legend-item {
            display: inline-block;
            margin: 5px 15px 5px 0;
            font-size: 14px;
        }
        .legend-color {
            display: inline-block;
            width: 16px;
            height: 16px;
            border-radius: 3px;
            margin-right: 8px;
            vertical-align: middle;
        }
        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #667eea;
            min-width: 120px;
        }
        .stat-number {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        .stat-label {
            font-size: 14px;
            color: #666;
            margin-top: 5px;
        }
        .details-panel {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin-top: 20px;
            display: none;
        }
        .details-panel h4 {
            margin-top: 0;
            color: #333;
        }
        .details-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .details-list li {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
        }
        .details-list li:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Code Flow Chart</h1>
        <p>File: sample.js</p>
    </div>
    
    <div class="diagram-container">
        <div class="mermaid">
flowchart TD
    node_0[Program]:::program
    node_1[Class: Calculator]:::class
    node_2[constructor]:::function
    node_3[add(a, b)]:::function
    node_4[subtract(a, b)]:::function
    node_5[multiply(a, b)]:::function
    node_6[If Statement]:::condition
    node_7[Return: 0]:::return
    node_8[Return: a * b]:::return
    node_9[divide(a, b)]:::function
    node_10[If Statement]:::condition
    node_11[Throw Error]:::return
    node_12[Return: a / b]:::return
    node_13[getHistory]:::function
    node_14[processNumbers(numbers)]:::function
    node_15[For Loop]:::loop
    node_16[If Statement]:::condition
    node_17[multiply(num, 2)]:::function
    node_18[multiply(num, num)]:::function
    
    node_0 --> node_1
    node_1 --> node_2
    node_1 --> node_3
    node_1 --> node_4
    node_1 --> node_5
    node_5 --> node_6
    node_6 --> node_7
    node_6 --> node_8
    node_1 --> node_9
    node_9 --> node_10
    node_10 --> node_11
    node_10 --> node_12
    node_1 --> node_13
    node_0 --> node_14
    node_14 --> node_15
    node_15 --> node_16
    node_16 --> node_17
    node_16 --> node_18
    
    classDef function fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#fff
    classDef method fill:#4CAF50,stroke:#2E7D32,stroke-width:2px,color:#fff
    classDef class fill:#2196F3,stroke:#1565C0,stroke-width:2px,color:#fff
    classDef condition fill:#FF9800,stroke:#E65100,stroke-width:2px,color:#fff
    classDef loop fill:#9C27B0,stroke:#4A148C,stroke-width:2px,color:#fff
    classDef return fill:#F44336,stroke:#C62828,stroke-width:2px,color:#fff
    classDef variable fill:#607D8B,stroke:#37474F,stroke-width:2px,color:#fff
    classDef block fill:#E0E0E0,stroke:#9E9E9E,stroke-width:2px,color:#000
    classDef program fill:#795548,stroke:#3E2723,stroke-width:3px,color:#fff
        </div>
    </div>
    
    <div class="legend">
        <h3>Legend</h3>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #4CAF50;"></span>
            Functions & Methods
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #2196F3;"></span>
            Classes
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #FF9800;"></span>
            Conditions
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #9C27B0;"></span>
            Loops
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #607D8B;"></span>
            Variables
        </div>
        <div class="legend-item">
            <span class="legend-color" style="background-color: #F44336;"></span>
            Returns
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
    </script>
</body>
</html>